<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Newton's Laws Simulator</title>
  <style>
    :root {
      --primary: #4361ee;
      --primary-dark: #3a0ca3;
      --secondary: #4cc9f0;
      --light: #f8f9fa;
      --dark: #212529;
      --success: #4ade80;
      --warning: #fbbf24;
      --danger: #f87171;
      --surface: #64748b;
      --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      --transition: all 0.3s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', system-ui, sans-serif;
      background: linear-gradient(135deg, #e0f2fe, #dbeafe);
      color: var(--dark);
      line-height: 1.6;
      min-height: 100vh;
      padding: 20px;
      overflow-x: hidden;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    header {
      text-align: center;
      padding: 20px 0;
      margin-bottom: 20px;
    }

    h1 {
      font-size: 2.8rem;
      margin-bottom: 10px;
      color: var(--primary-dark);
      text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
      background: linear-gradient(45deg, #3a0ca3, #4361ee);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .subtitle {
      font-size: 1.2rem;
      color: var(--dark);
      max-width: 800px;
      margin: 0 auto;
      padding: 0 20px;
    }

    .tabs {
      display: flex;
      justify-content: center;
      margin-bottom: 30px;
      flex-wrap: wrap;
      gap: 12px;
    }

    .tab-btn {
      padding: 14px 28px;
      background: white;
      border: 2px solid var(--primary);
      border-radius: 50px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      color: var(--primary);
      box-shadow: var(--card-shadow);
      display: flex;
      align-items: center;
    }

    .tab-btn:hover {
      background: var(--primary);
      color: white;
      transform: translateY(-3px);
      box-shadow: 0 8px 15px rgba(67, 97, 238, 0.3);
    }

    .tab-btn.active {
      background: var(--primary);
      color: white;
      box-shadow: 0 6px 12px rgba(67, 97, 238, 0.25);
    }

    .law-icon {
      display: inline-flex;
      justify-content: center;
      align-items: center;
      background: white;
      color: var(--primary);
      width: 30px;
      height: 30px;
      border-radius: 50%;
      text-align: center;
      font-weight: bold;
      margin-right: 10px;
    }

    .content-section {
      background: white;
      border-radius: 16px;
      box-shadow: var(--card-shadow);
      overflow: hidden;
      margin-bottom: 30px;
      display: none;
      border: 1px solid #e5e7eb;
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.5s ease, transform 0.5s ease;
    }

    .content-section.active {
      display: block;
      opacity: 1;
      transform: translateY(0);
    }

    .concept-header {
      background: linear-gradient(to right, var(--primary), var(--primary-dark));
      color: white;
      padding: 20px 30px;
    }

    .concept-header h2 {
      font-size: 1.8rem;
      margin-bottom: 8px;
    }

    .concept-content {
      padding: 30px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
    }

    @media (max-width: 900px) {
      .concept-content {
        grid-template-columns: 1fr;
      }
    }

    .explanation {
      background: var(--light);
      border-radius: 12px;
      padding: 20px;
      box-shadow: inset 0 0 8px rgba(0,0,0,0.05);
    }

    .explanation h3 {
      color: var(--primary);
      margin-bottom: 15px;
      font-size: 1.4rem;
      border-bottom: 2px solid #dbeafe;
      padding-bottom: 10px;
    }

    .law-formula {
      background: #eef2ff;
      padding: 15px;
      border-radius: 8px;
      text-align: center;
      font-size: 1.4rem;
      font-weight: bold;
      margin: 15px 0;
      color: var(--primary-dark);
      border-left: 4px solid var(--primary);
      font-family: 'Courier New', monospace;
    }

    .simulation-area {
      display: flex;
      flex-direction: column;
    }

    .canvas-container {
      background: #dbeafe;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      margin-bottom: 20px;
      position: relative;
      border: 2px solid var(--primary);
      height: 320px;
    }

    canvas {
      display: block;
      width: 100%;
      height: 100%;
    }

    .controls {
      background: var(--light);
      border-radius: 12px;
      padding: 20px;
      box-shadow: inset 0 0 8px rgba(0,0,0,0.05);
    }

    .control-group {
      margin-bottom: 15px;
    }

    .control-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--dark);
    }

    input[type="range"] {
      width: 100%;
      height: 8px;
      background: #cbd5e1;
      border-radius: 4px;
      outline: none;
      -webkit-appearance: none;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 20px;
      height: 20px;
      background: var(--primary);
      border-radius: 50%;
      cursor: pointer;
      transition: var(--transition);
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    input[type="range"]::-webkit-slider-thumb:hover {
      transform: scale(1.2);
      background: var(--primary-dark);
    }

    .value-display {
      display: flex;
      justify-content: space-between;
      margin-top: 5px;
      color: var(--dark);
      font-size: 0.9rem;
    }

    .buttons {
      display: flex;
      gap: 12px;
      margin-top: 20px;
    }

    button {
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      flex: 1;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    button:active {
      transform: translateY(2px);
      box-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }

    .btn-start {
      background: var(--success);
      color: white;
    }

    .btn-pause {
      background: var(--warning);
      color: white;
    }

    .btn-reset {
      background: var(--danger);
      color: white;
    }

    .metrics {
      background: var(--dark);
      color: white;
      border-radius: 12px;
      padding: 20px;
      margin-top: 20px;
    }

    .metrics h3 {
      text-align: center;
      margin-bottom: 15px;
      color: var(--light);
    }

    .metric-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }

    .metric-card {
      background: rgba(255, 255, 255, 0.1);
      padding: 12px;
      border-radius: 8px;
      text-align: center;
    }

    .metric-value {
      font-size: 1.4rem;
      font-weight: bold;
      margin-top: 5px;
      color: white;
    }

    .metric-label {
      font-size: 0.9rem;
      color: #94a3b8;
    }

    footer {
      text-align: center;
      padding: 30px 0;
      color: var(--dark);
      font-size: 0.9rem;
      margin-top: 20px;
    }

    .examples {
      margin-top: 20px;
      background: white;
      padding: 15px;
      border-radius: 8px;
      border-left: 4px solid var(--warning);
    }

    .examples h4 {
      color: var(--warning);
      margin-bottom: 10px;
      display: flex;
      align-items: center;
    }

    .examples h4:before {
      content: "✨";
      margin-right: 8px;
    }

    .examples ul {
      padding-left: 20px;
    }

    .examples li {
      margin-bottom: 8px;
      position: relative;
      padding-left: 20px;
    }

    .examples li:before {
      content: "•";
      color: var(--warning);
      position: absolute;
      left: 0;
      font-size: 1.2rem;
    }

    .scale-indicator {
      position: absolute;
      bottom: 10px;
      left: 10px;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      padding: 5px 10px;
      border-radius: 4px;
      font-size: 12px;
    }

    .boundary-indicator {
      position: absolute;
      bottom: 10px;
      right: 10px;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      padding: 5px 10px;
      border-radius: 4px;
      font-size: 12px;
      display: none;
    }

    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--success);
      color: white;
      padding: 15px 25px;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      transform: translateX(200%);
      transition: transform 0.3s ease;
      z-index: 1000;
    }
    
    .notification.show {
      transform: translateX(0);
    }
  </style>
</head>
<body>
  <div class="notification" id="notification">Simulation started! Adjust parameters to see changes.</div>
  
  <div class="container">
    <header>
      <h1>Newton's Laws of Motion</h1>
      <p class="subtitle">Interactive physics simulator demonstrating Newton's three laws with realistic animations</p>
    </header>

    <div class="tabs">
      <button class="tab-btn active" data-tab="law1">
        <span class="law-icon">1</span> Law of Inertia
      </button>
      <button class="tab-btn" data-tab="law2">
        <span class="law-icon">2</span> F=ma
      </button>
      <button class="tab-btn" data-tab="law3">
        <span class="law-icon">3</span> Action-Reaction
      </button>
    </div>

    <!-- Law 1: Inertia -->
    <section id="law1" class="content-section active">
      <div class="concept-header">
        <h2>Newton's First Law: Law of Inertia</h2>
        <p>An object at rest stays at rest, and an object in motion stays in motion unless acted upon by an external force.</p>
      </div>
      
      <div class="concept-content">
        <div class="explanation">
          <h3>Understanding Inertia</h3>
          <p>Inertia is the tendency of an object to resist changes in its state of motion. This fundamental property depends on the object's mass.</p>
          
          <div class="law-formula">ΣF = 0 ⇒ a = 0</div>
          
          <p>Key principles:</p>
          <ul>
            <li>Objects naturally resist changes to their velocity</li>
            <li>Greater mass means greater inertia</li>
            <li>Friction is the force that eventually stops moving objects</li>
            <li>In space, with no friction, objects would move forever</li>
          </ul>
          
          <div class="examples">
            <h4>Real-life Examples</h4>
            <ul>
              <li>Passengers lurch forward when a car stops suddenly</li>
              <li>A hockey puck slides across the ice</li>
              <li>Books on a car seat slide when you brake hard</li>
            </ul>
          </div>
        </div>
        
        <div class="simulation-area">
          <div class="canvas-container">
            <canvas id="canvas1" width="800" height="320"></canvas>
            <div class="scale-indicator">Scale: 1m = 50px</div>
            <div class="boundary-indicator" id="boundary1">Object reached boundary!</div>
          </div>
          
          <div class="controls">
            <div class="control-group">
              <label for="inertia-mass">Mass (kg)</label>
              <input type="range" id="inertia-mass" min="1" max="20" step="1" value="5">
              <div class="value-display">
                <span>Light</span>
                <span id="inertia-mass-val">5 kg</span>
                <span>Heavy</span>
              </div>
            </div>
            
            <div class="control-group">
              <label for="inertia-friction">Friction Coefficient</label>
              <input type="range" id="inertia-friction" min="0" max="0.5" step="0.01" value="0.1">
              <div class="value-display">
                <span>None</span>
                <span id="inertia-friction-val">0.10</span>
                <span>High</span>
              </div>
            </div>
            
            <div class="control-group">
              <label for="inertia-initial">Initial Velocity (m/s)</label>
              <input type="range" id="inertia-initial" min="0" max="20" step="1" value="10">
              <div class="value-display">
                <span>0</span>
                <span id="inertia-initial-val">10 m/s</span>
                <span>20</span>
              </div>
            </div>
            
            <div class="buttons">
              <button id="start1" class="btn-start">Start</button>
              <button id="pause1" class="btn-pause">Pause</button>
              <button id="reset1" class="btn-reset">Reset</button>
            </div>
          </div>
          
          <div class="metrics">
            <h3>Simulation Metrics</h3>
            <div class="metric-grid">
              <div class="metric-card">
                <div class="metric-label">Velocity</div>
                <div class="metric-value" id="velocity1">0.00 m/s</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Position</div>
                <div class="metric-value" id="position1">0.00 m</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Friction Force</div>
                <div class="metric-value" id="friction1">0.00 N</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Time</div>
                <div class="metric-value" id="time1">0.00 s</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Law 2: F=ma -->
    <section id="law2" class="content-section">
      <div class="concept-header">
        <h2>Newton's Second Law: F=ma</h2>
        <p>The acceleration of an object depends on its mass and the applied force.</p>
      </div>
      
      <div class="concept-content">
        <div class="explanation">
          <h3>Force, Mass and Acceleration</h3>
          <p>This law quantifies how forces affect motion. The acceleration produced by a net force is directly proportional to the force and inversely proportional to the object's mass.</p>
          
          <div class="law-formula">F = m · a</div>
          
          <p>Key principles:</p>
          <ul>
            <li>Acceleration is in the direction of the net force</li>
            <li>Greater mass requires greater force for same acceleration</li>
            <li>Net force = vector sum of all forces acting on object</li>
            <li>Units: Newtons (N) = kg·m/s²</li>
          </ul>
          
          <div class="examples">
            <h4>Real-life Examples</h4>
            <ul>
              <li>Pushing a shopping cart (empty vs. full)</li>
              <li>Car acceleration depends on engine power and weight</li>
              <li>Kicking a soccer ball with different force</li>
            </ul>
          </div>
        </div>
        
        <div class="simulation-area">
          <div class="canvas-container">
            <canvas id="canvas2" width="800" height="320"></canvas>
            <div class="scale-indicator">Scale: 1m = 50px</div>
            <div class="boundary-indicator" id="boundary2">Object reached boundary!</div>
          </div>
          
          <div class="controls">
            <div class="control-group">
              <label for="force-value">Applied Force (N)</label>
              <input type="range" id="force-value" min="0" max="100" step="5" value="50">
              <div class="value-display">
                <span>0</span>
                <span id="force-value-val">50 N</span>
                <span>100</span>
              </div>
            </div>
            
            <div class="control-group">
              <label for="mass-value">Mass (kg)</label>
              <input type="range" id="mass-value" min="1" max="20" step="1" value="10">
              <div class="value-display">
                <span>Light</span>
                <span id="mass-value-val">10 kg</span>
                <span>Heavy</span>
              </div>
            </div>
            
            <div class="control-group">
              <label for="friction-value">Friction Coefficient</label>
              <input type="range" id="friction-value" min="0" max="0.3" step="0.01" value="0.1">
              <div class="value-display">
                <span>None</span>
                <span id="friction-value-val">0.10</span>
                <span>High</span>
              </div>
            </div>
            
            <div class="buttons">
              <button id="start2" class="btn-start">Start</button>
              <button id="pause2" class="btn-pause">Pause</button>
              <button id="reset2" class="btn-reset">Reset</button>
            </div>
          </div>
          
          <div class="metrics">
            <h3>Simulation Metrics</h3>
            <div class="metric-grid">
              <div class="metric-card">
                <div class="metric-label">Acceleration</div>
                <div class="metric-value" id="acceleration2">0.00 m/s²</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Velocity</div>
                <div class="metric-value" id="velocity2">0.00 m/s</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Net Force</div>
                <div class="metric-value" id="netforce2">0.00 N</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Time</div>
                <div class="metric-value" id="time2">0.00 s</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Law 3: Action-Reaction -->
    <section id="law3" class="content-section">
      <div class="concept-header">
        <h2>Newton's Third Law: Action-Reaction</h2>
        <p>For every action, there is an equal and opposite reaction.</p>
      </div>
      
      <div class="concept-content">
        <div class="explanation">
          <h3>Force Pairs</h3>
          <p>When one object exerts a force on a second object, the second object exerts an equal and opposite force on the first.</p>
          
          <div class="law-formula">F<sub>AB</sub> = -F<sub>BA</sub></div>
          
          <p>Key principles:</p>
          <ul>
            <li>Forces always occur in pairs</li>
            <li>Action and reaction forces act on different objects</li>
            <li>Forces are equal in magnitude but opposite in direction</li>
            <li>Explains how rockets work and why we can walk</li>
          </ul>
          
          <div class="examples">
            <h4>Real-life Examples</h4>
            <ul>
              <li>Rocket propulsion (exhaust gases push rocket forward)</li>
              <li>Swimming (pushing water backward moves you forward)</li>
              <li>Walking (pushing ground backward moves you forward)</li>
            </ul>
          </div>
        </div>
        
        <div class="simulation-area">
          <div class="canvas-container">
            <canvas id="canvas3" width="800" height="320"></canvas>
            <div class="scale-indicator">Scale: 1m = 50px</div>
            <div class="boundary-indicator" id="boundary3">Object reached boundary!</div>
          </div>
          
          <div class="controls">
            <div class="control-group">
              <label for="mass1-value">Mass of Object A (kg)</label>
              <input type="range" id="mass1-value" min="1" max="20" step="1" value="5">
              <div class="value-display">
                <span>1</span>
                <span id="mass1-value-val">5 kg</span>
                <span>20</span>
              </div>
            </div>
            
            <div class="control-group">
              <label for="mass2-value">Mass of Object B (kg)</label>
              <input type="range" id="mass2-value" min="1" max="20" step="1" value="10">
              <div class="value-display">
                <span>1</span>
                <span id="mass2-value-val">10 kg</span>
                <span>20</span>
              </div>
            </div>
            
            <div class="control-group">
              <label for="force-magnitude">Applied Force (N)</label>
              <input type="range" id="force-magnitude" min="0" max="100" step="5" value="50">
              <div class="value-display">
                <span>0</span>
                <span id="force-magnitude-val">50 N</span>
                <span>100</span>
              </div>
            </div>
            
            <div class="buttons">
              <button id="start3" class="btn-start">Start</button>
              <button id="pause3" class="btn-pause">Pause</button>
              <button id="reset3" class="btn-reset">Reset</button>
            </div>
          </div>
          
          <div class="metrics">
            <h3>Simulation Metrics</h3>
            <div class="metric-grid">
              <div class="metric-card">
                <div class="metric-label">Force on A</div>
                <div class="metric-value" id="forceA">0.00 N</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Force on B</div>
                <div class="metric-value" id="forceB">0.00 N</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Acceleration A</div>
                <div class="metric-value" id="accelerationA">0.00 m/s²</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Acceleration B</div>
                <div class="metric-value" id="accelerationB">0.00 m/s²</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <p>Interactive Physics Simulator | Newton's Laws of Motion | Educational Tool</p>
    </footer>
  </div>

  <script>
    // Tab switching functionality
    const tabBtns = document.querySelectorAll('.tab-btn');
    const contentSections = document.querySelectorAll('.content-section');

    tabBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        // Remove active class from all buttons and sections
        tabBtns.forEach(b => b.classList.remove('active'));
        contentSections.forEach(section => section.classList.remove('active'));
        
        // Add active class to clicked button
        btn.classList.add('active');
        
        // Show corresponding section
        const tabId = btn.getAttribute('data-tab');
        document.getElementById(tabId).classList.add('active');
      });
    });

    // Physics constants
    const PIXELS_PER_METER = 50;
    const GRAVITY = 9.8;
    
    // Notification system
    function showNotification(message) {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.classList.add('show');
      
      setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);
    }

    // Boundary indicator system
    function showBoundaryIndicator(canvasId) {
      const indicator = document.getElementById(`boundary${canvasId}`);
      indicator.style.display = 'block';
      setTimeout(() => {
        indicator.style.display = 'none';
      }, 3000);
    }

    // =====================
    // Law 1: Inertia Simulation
    // =====================
    const canvas1 = document.getElementById('canvas1');
    const ctx1 = canvas1.getContext('2d');
    let inertiaSimulation = {
      mass: 5,
      friction: 0.1,
      initialVelocity: 10,
      position: 1,
      velocity: 0,
      frictionForce: 0,
      time: 0,
      running: false,
      animationId: null,
      lastTime: 0,
      boundaryReached: false
    };

    function renderInertia() {
      const width = canvas1.width;
      const height = canvas1.height;
      const surfaceHeight = 50;
      
      // Clear canvas
      ctx1.clearRect(0, 0, width, height);
      
      // Draw background
      ctx1.fillStyle = '#dbeafe';
      ctx1.fillRect(0, 0, width, height);
      
      // Draw surface
      ctx1.fillStyle = '#94a3b8';
      ctx1.fillRect(0, height - surfaceHeight, width, surfaceHeight);
      
      // Draw grid lines and distance markers
      ctx1.strokeStyle = '#64748b';
      ctx1.lineWidth = 1;
      ctx1.fillStyle = '#334155';
      ctx1.font = '12px Arial';
      ctx1.textAlign = 'center';
      
      for (let x = 0; x < width; x += PIXELS_PER_METER) {
        ctx1.beginPath();
        ctx1.moveTo(x, height - surfaceHeight);
        ctx1.lineTo(x, height - surfaceHeight + 10);
        ctx1.stroke();
        
        const meters = x / PIXELS_PER_METER;
        ctx1.fillText(`${meters}m`, x, height - surfaceHeight + 25);
      }
      
      // Draw the bus
      const busWidth = 120;
      const busHeight = 60;
      const busX = inertiaSimulation.position * PIXELS_PER_METER - busWidth/2;
      const busY = height - surfaceHeight - busHeight;
      
      // Bus body
      ctx1.fillStyle = '#f59e0b';
      ctx1.fillRect(busX, busY, busWidth, busHeight);
      
      // Bus details
      ctx1.fillStyle = '#b45309';
      ctx1.fillRect(busX + 10, busY + 10, 30, 20); // Window
      ctx1.fillRect(busX + 50, busY + 10, 30, 20); // Window
      ctx1.fillRect(busX + 90, busY + 10, 20, 20); // Window
      
      // Wheels
      ctx1.fillStyle = '#1e293b';
      ctx1.beginPath();
      ctx1.arc(busX + 30, busY + busHeight, 10, 0, Math.PI * 2);
      ctx1.fill();
      ctx1.beginPath();
      ctx1.arc(busX + busWidth - 30, busY + busHeight, 10, 0, Math.PI * 2);
      ctx1.fill();
      
      // Draw friction arrow if moving
      if (inertiaSimulation.velocity !== 0) {
        ctx1.strokeStyle = '#ef4444';
        ctx1.lineWidth = 3;
        ctx1.beginPath();
        ctx1.moveTo(busX + busWidth/2, busY + busHeight/2);
        ctx1.lineTo(busX + busWidth/2 - 60, busY + busHeight/2);
        ctx1.stroke();
        
        // Arrow head
        ctx1.fillStyle = '#ef4444';
        ctx1.beginPath();
        ctx1.moveTo(busX + busWidth/2 - 60, busY + busHeight/2);
        ctx1.lineTo(busX + busWidth/2 - 50, busY + busHeight/2 - 6);
        ctx1.lineTo(busX + busWidth/2 - 50, busY + busHeight/2 + 6);
        ctx1.closePath();
        ctx1.fill();
        
        // Label
        ctx1.fillStyle = '#1f2937';
        ctx1.font = '14px Arial';
        ctx1.fillText('Friction', busX + busWidth/2 - 70, busY + busHeight/2 - 15);
      }
    }

    function updateInertiaSimulation(timestamp) {
      if (!inertiaSimulation.running) return;
      
      if (!inertiaSimulation.lastTime) inertiaSimulation.lastTime = timestamp;
      const deltaTime = (timestamp - inertiaSimulation.lastTime) / 1000;
      inertiaSimulation.lastTime = timestamp;
      
      // Calculate friction force
      const normalForce = inertiaSimulation.mass * GRAVITY;
      inertiaSimulation.frictionForce = inertiaSimulation.friction * normalForce;
      
      // Calculate acceleration (friction opposes motion)
      const acceleration = -inertiaSimulation.frictionForce / inertiaSimulation.mass;
      
      // Update velocity and position
      inertiaSimulation.velocity += acceleration * deltaTime;
      
      // Stop if velocity is very small
      if (Math.abs(inertiaSimulation.velocity) < 0.05) {
        inertiaSimulation.velocity = 0;
        inertiaSimulation.frictionForce = 0;
      }
      
      inertiaSimulation.position += inertiaSimulation.velocity * deltaTime;
      
      // Boundary check - stop simulation at boundaries
      const minX = 0.5;
      const maxX = canvas1.width / PIXELS_PER_METER - 1.5;
      
      if (inertiaSimulation.position < minX) {
        inertiaSimulation.position = minX;
        inertiaSimulation.velocity = 0;
        inertiaSimulation.running = false;
        inertiaSimulation.boundaryReached = true;
        showBoundaryIndicator('1');
      }
      
      if (inertiaSimulation.position > maxX) {
        inertiaSimulation.position = maxX;
        inertiaSimulation.velocity = 0;
        inertiaSimulation.running = false;
        inertiaSimulation.boundaryReached = true;
        showBoundaryIndicator('1');
      }
      
      // Only update time if not at boundary
      if (!inertiaSimulation.boundaryReached) {
        inertiaSimulation.time += deltaTime;
      }
      
      // Update metrics
      document.getElementById('velocity1').textContent = inertiaSimulation.velocity.toFixed(2) + ' m/s';
      document.getElementById('position1').textContent = inertiaSimulation.position.toFixed(2) + ' m';
      document.getElementById('friction1').textContent = inertiaSimulation.frictionForce.toFixed(2) + ' N';
      document.getElementById('time1').textContent = inertiaSimulation.time.toFixed(2) + ' s';
      
      // Render
      renderInertia();
      
      if (inertiaSimulation.running) {
        inertiaSimulation.animationId = requestAnimationFrame(updateInertiaSimulation);
      }
    }

    // Set up Law 1 controls
    document.getElementById('inertia-mass').addEventListener('input', function() {
      inertiaSimulation.mass = parseFloat(this.value);
      document.getElementById('inertia-mass-val').textContent = this.value + ' kg';
    });
    
    document.getElementById('inertia-friction').addEventListener('input', function() {
      inertiaSimulation.friction = parseFloat(this.value);
      document.getElementById('inertia-friction-val').textContent = parseFloat(this.value).toFixed(2);
    });
    
    document.getElementById('inertia-initial').addEventListener('input', function() {
      inertiaSimulation.initialVelocity = parseFloat(this.value);
      document.getElementById('inertia-initial-val').textContent = this.value + ' m/s';
    });
    
    document.getElementById('start1').addEventListener('click', function() {
      if (!inertiaSimulation.running) {
        inertiaSimulation.running = true;
        inertiaSimulation.lastTime = 0;
        inertiaSimulation.boundaryReached = false;
        if (inertiaSimulation.velocity === 0) {
          inertiaSimulation.velocity = inertiaSimulation.initialVelocity;
        }
        requestAnimationFrame(updateInertiaSimulation);
        showNotification("Inertia simulation started! The bus will slow down due to friction.");
      }
    });
    
    document.getElementById('pause1').addEventListener('click', function() {
      inertiaSimulation.running = false;
      if (inertiaSimulation.animationId) {
        cancelAnimationFrame(inertiaSimulation.animationId);
      }
      showNotification("Simulation paused");
    });
    
    document.getElementById('reset1').addEventListener('click', function() {
      inertiaSimulation.running = false;
      inertiaSimulation.boundaryReached = false;
      if (inertiaSimulation.animationId) {
        cancelAnimationFrame(inertiaSimulation.animationId);
      }
      inertiaSimulation.position = 1;
      inertiaSimulation.velocity = 0;
      inertiaSimulation.frictionForce = 0;
      inertiaSimulation.time = 0;
      
      document.getElementById('velocity1').textContent = '0.00 m/s';
      document.getElementById('position1').textContent = '0.00 m';
      document.getElementById('friction1').textContent = '0.00 N';
      document.getElementById('time1').textContent = '0.00 s';
      
      renderInertia();
      showNotification("Simulation reset");
    });

    // Initial render
    renderInertia();

    // =====================
    // Law 2: F=ma Simulation
    // =====================
    const canvas2 = document.getElementById('canvas2');
    const ctx2 = canvas2.getContext('2d');
    let fmaSimulation = {
      mass: 10,
      force: 50,
      friction: 0.1,
      position: 1,
      velocity: 0,
      acceleration: 0,
      frictionForce: 0,
      netForce: 0,
      time: 0,
      running: false,
      animationId: null,
      lastTime: 0,
      boundaryReached: false
    };

    function renderFma() {
      const width = canvas2.width;
      const height = canvas2.height;
      const surfaceHeight = 50;
      
      // Clear canvas
      ctx2.clearRect(0, 0, width, height);
      
      // Draw background
      ctx2.fillStyle = '#dbeafe';
      ctx2.fillRect(0, 0, width, height);
      
      // Draw surface
      ctx2.fillStyle = '#94a3b8';
      ctx2.fillRect(0, height - surfaceHeight, width, surfaceHeight);
      
      // Draw grid lines and distance markers
      ctx2.strokeStyle = '#64748b';
      ctx2.lineWidth = 1;
      ctx2.fillStyle = '#334155';
      ctx2.font = '12px Arial';
      ctx2.textAlign = 'center';
      
      for (let x = 0; x < width; x += PIXELS_PER_METER) {
        ctx2.beginPath();
        ctx2.moveTo(x, height - surfaceHeight);
        ctx2.lineTo(x, height - surfaceHeight + 10);
        ctx2.stroke();
        
        const meters = x / PIXELS_PER_METER;
        ctx2.fillText(`${meters}m`, x, height - surfaceHeight + 25);
      }
      
      // Draw the car
      const carWidth = 100;
      const carHeight = 50;
      const carX = fmaSimulation.position * PIXELS_PER_METER - carWidth/2;
      const carY = height - surfaceHeight - carHeight;
      
      // Car body
      ctx2.fillStyle = '#3b82f6';
      ctx2.fillRect(carX, carY, carWidth, carHeight);
      
      // Car details
      ctx2.fillStyle = '#1d4ed8';
      ctx2.fillRect(carX + 70, carY + 10, 20, 15); // Window
      ctx2.fillRect(carX + 10, carY + 10, 50, 15); // Window
      
      // Wheels
      ctx2.fillStyle = '#1e293b';
      ctx2.beginPath();
      ctx2.arc(carX + 25, carY + carHeight, 8, 0, Math.PI * 2);
      ctx2.fill();
      ctx2.beginPath();
      ctx2.arc(carX + carWidth - 25, carY + carHeight, 8, 0, Math.PI * 2);
      ctx2.fill();
      
      // Draw applied force arrow
      if (fmaSimulation.force > 0) {
        ctx2.strokeStyle = '#10b981';
        ctx2.lineWidth = 3;
        ctx2.beginPath();
        ctx2.moveTo(carX + carWidth, carY + carHeight/2);
        ctx2.lineTo(carX + carWidth + 60, carY + carHeight/2);
        ctx2.stroke();
        
        // Arrow head
        ctx2.fillStyle = '#10b981';
        ctx2.beginPath();
        ctx2.moveTo(carX + carWidth + 60, carY + carHeight/2);
        ctx2.lineTo(carX + carWidth + 50, carY + carHeight/2 - 6);
        ctx2.lineTo(carX + carWidth + 50, carY + carHeight/2 + 6);
        ctx2.closePath();
        ctx2.fill();
        
        // Label
        ctx2.fillStyle = '#1f2937';
        ctx2.font = '14px Arial';
        ctx2.fillText('Applied Force', carX + carWidth + 30, carY + carHeight/2 - 15);
      }
      
      // Draw friction arrow if moving
      if (fmaSimulation.velocity !== 0) {
        ctx2.strokeStyle = '#ef4444';
        ctx2.lineWidth = 3;
        ctx2.beginPath();
        ctx2.moveTo(carX, carY + carHeight/2);
        ctx2.lineTo(carX - 40, carY + carHeight/2);
        ctx2.stroke();
        
        // Arrow head
        ctx2.fillStyle = '#ef4444';
        ctx2.beginPath();
        ctx2.moveTo(carX - 40, carY + carHeight/2);
        ctx2.lineTo(carX - 30, carY + carHeight/2 - 6);
        ctx2.lineTo(carX - 30, carY + carHeight/2 + 6);
        ctx2.closePath();
        ctx2.fill();
        
        // Label
        ctx2.fillStyle = '#1f2937';
        ctx2.font = '14px Arial';
        ctx2.fillText('Friction', carX - 70, carY + carHeight/2 - 15);
      }
    }

    function updateFmaSimulation(timestamp) {
      if (!fmaSimulation.running) return;
      
      if (!fmaSimulation.lastTime) fmaSimulation.lastTime = timestamp;
      const deltaTime = (timestamp - fmaSimulation.lastTime) / 1000;
      fmaSimulation.lastTime = timestamp;
      
      // Calculate forces
      const normalForce = fmaSimulation.mass * GRAVITY;
      fmaSimulation.frictionForce = fmaSimulation.friction * normalForce;
      
      // Calculate net force
      if (fmaSimulation.velocity !== 0) {
        // Kinetic friction - opposes motion
        fmaSimulation.netForce = fmaSimulation.force - Math.sign(fmaSimulation.velocity) * fmaSimulation.frictionForce;
      } else {
        // Static friction - object doesn't move until force > max static friction
        if (fmaSimulation.force > fmaSimulation.frictionForce) {
          fmaSimulation.netForce = fmaSimulation.force - fmaSimulation.frictionForce;
        } else if (fmaSimulation.force < -fmaSimulation.frictionForce) {
          fmaSimulation.netForce = fmaSimulation.force + fmaSimulation.frictionForce;
        } else {
          fmaSimulation.netForce = 0;
        }
      }
      
      // Calculate acceleration
      fmaSimulation.acceleration = fmaSimulation.netForce / fmaSimulation.mass;
      
      // Update velocity and position
      fmaSimulation.velocity += fmaSimulation.acceleration * deltaTime;
      fmaSimulation.position += fmaSimulation.velocity * deltaTime;
      
      // Boundary check - stop simulation at boundaries
      const minX = 0.5;
      const maxX = canvas2.width / PIXELS_PER_METER - 1.5;
      
      if (fmaSimulation.position < minX) {
        fmaSimulation.position = minX;
        fmaSimulation.velocity = 0;
        fmaSimulation.running = false;
        fmaSimulation.boundaryReached = true;
        showBoundaryIndicator('2');
      }
      
      if (fmaSimulation.position > maxX) {
        fmaSimulation.position = maxX;
        fmaSimulation.velocity = 0;
        fmaSimulation.running = false;
        fmaSimulation.boundaryReached = true;
        showBoundaryIndicator('2');
      }
      
      // Only update time if not at boundary
      if (!fmaSimulation.boundaryReached) {
        fmaSimulation.time += deltaTime;
      }
      
      // Update metrics
      document.getElementById('acceleration2').textContent = fmaSimulation.acceleration.toFixed(2) + ' m/s²';
      document.getElementById('velocity2').textContent = fmaSimulation.velocity.toFixed(2) + ' m/s';
      document.getElementById('netforce2').textContent = fmaSimulation.netForce.toFixed(2) + ' N';
      document.getElementById('time2').textContent = fmaSimulation.time.toFixed(2) + ' s';
      
      // Render
      renderFma();
      
      if (fmaSimulation.running) {
        fmaSimulation.animationId = requestAnimationFrame(updateFmaSimulation);
      }
    }

    // Set up Law 2 controls
    document.getElementById('force-value').addEventListener('input', function() {
      fmaSimulation.force = parseFloat(this.value);
      document.getElementById('force-value-val').textContent = this.value + ' N';
    });
    
    document.getElementById('mass-value').addEventListener('input', function() {
      fmaSimulation.mass = parseFloat(this.value);
      document.getElementById('mass-value-val').textContent = this.value + ' kg';
    });
    
    document.getElementById('friction-value').addEventListener('input', function() {
      fmaSimulation.friction = parseFloat(this.value);
      document.getElementById('friction-value-val').textContent = parseFloat(this.value).toFixed(2);
    });
    
    document.getElementById('start2').addEventListener('click', function() {
      if (!fmaSimulation.running) {
        fmaSimulation.running = true;
        fmaSimulation.lastTime = 0;
        fmaSimulation.boundaryReached = false;
        requestAnimationFrame(updateFmaSimulation);
        showNotification("F=ma simulation started! See how force affects acceleration.");
      }
    });
    
    document.getElementById('pause2').addEventListener('click', function() {
      fmaSimulation.running = false;
      if (fmaSimulation.animationId) {
        cancelAnimationFrame(fmaSimulation.animationId);
      }
      showNotification("Simulation paused");
    });
    
    document.getElementById('reset2').addEventListener('click', function() {
      fmaSimulation.running = false;
      fmaSimulation.boundaryReached = false;
      if (fmaSimulation.animationId) {
        cancelAnimationFrame(fmaSimulation.animationId);
      }
      fmaSimulation.position = 1;
      fmaSimulation.velocity = 0;
      fmaSimulation.acceleration = 0;
      fmaSimulation.frictionForce = 0;
      fmaSimulation.netForce = 0;
      fmaSimulation.time = 0;
      
      document.getElementById('acceleration2').textContent = '0.00 m/s²';
      document.getElementById('velocity2').textContent = '0.00 m/s';
      document.getElementById('netforce2').textContent = '0.00 N';
      document.getElementById('time2').textContent = '0.00 s';
      
      renderFma();
      showNotification("Simulation reset");
    });

    // Initial render
    renderFma();

    // =====================
    // Law 3: Action-Reaction Simulation
    // =====================
    const canvas3 = document.getElementById('canvas3');
    const ctx3 = canvas3.getContext('2d');
    let actionReactionSimulation = {
      massA: 5,
      massB: 10,
      force: 50,
      positionA: 3,
      positionB: 6,
      velocityA: 0,
      velocityB: 0,
      accelerationA: 0,
      accelerationB: 0,
      forceA: 0,
      forceB: 0,
      time: 0,
      running: false,
      animationId: null,
      lastTime: 0,
      boundaryReached: false
    };

    function renderActionReaction() {
      const width = canvas3.width;
      const height = canvas3.height;
      const surfaceHeight = 50;
      
      // Clear canvas
      ctx3.clearRect(0, 0, width, height);
      
      // Draw background
      ctx3.fillStyle = '#dbeafe';
      ctx3.fillRect(0, 0, width, height);
      
      // Draw surface
      ctx3.fillStyle = '#94a3b8';
      ctx3.fillRect(0, height - surfaceHeight, width, surfaceHeight);
      
      // Draw grid lines and distance markers
      ctx3.strokeStyle = '#64748b';
      ctx3.lineWidth = 1;
      ctx3.fillStyle = '#334155';
      ctx3.font = '12px Arial';
      ctx3.textAlign = 'center';
      
      for (let x = 0; x < width; x += PIXELS_PER_METER) {
        ctx3.beginPath();
        ctx3.moveTo(x, height - surfaceHeight);
        ctx3.lineTo(x, height - surfaceHeight + 10);
        ctx3.stroke();
        
        const meters = x / PIXELS_PER_METER;
        ctx3.fillText(`${meters}m`, x, height - surfaceHeight + 25);
      }
      
      // Draw object A
      const boxSize = 60;
      const boxA_X = actionReactionSimulation.positionA * PIXELS_PER_METER - boxSize/2;
      const boxA_Y = height - surfaceHeight - boxSize;
      
      ctx3.fillStyle = '#f59e0b';
      ctx3.fillRect(boxA_X, boxA_Y, boxSize, boxSize);
      ctx3.fillStyle = '#1f2937';
      ctx3.font = 'bold 16px Arial';
      ctx3.textAlign = 'center';
      ctx3.fillText('A', boxA_X + boxSize/2, boxA_Y + boxSize/2 + 5);
      
      // Draw object B
      const boxB_X = actionReactionSimulation.positionB * PIXELS_PER_METER - boxSize/2;
      const boxB_Y = height - surfaceHeight - boxSize;
      
      ctx3.fillStyle = '#3b82f6';
      ctx3.fillRect(boxB_X, boxB_Y, boxSize, boxSize);
      ctx3.fillStyle = '#1f2937';
      ctx3.font = 'bold 16px Arial';
      ctx3.fillText('B', boxB_X + boxSize/2, boxB_Y + boxSize/2 + 5);
      
      // Draw force arrows
      if (actionReactionSimulation.force > 0) {
        // Force on A (reaction)
        ctx3.strokeStyle = '#ef4444';
        ctx3.lineWidth = 3;
        ctx3.beginPath();
        ctx3.moveTo(boxA_X, boxA_Y + boxSize/2);
        ctx3.lineTo(boxA_X - 50, boxA_Y + boxSize/2);
        ctx3.stroke();
        
        ctx3.fillStyle = '#ef4444';
        ctx3.beginPath();
        ctx3.moveTo(boxA_X - 50, boxA_Y + boxSize/2);
        ctx3.lineTo(boxA_X - 40, boxA_Y + boxSize/2 - 6);
        ctx3.lineTo(boxA_X - 40, boxA_Y + boxSize/2 + 6);
        ctx3.closePath();
        ctx3.fill();
        
        ctx3.fillStyle = '#1f2937';
        ctx3.font = '14px Arial';
        ctx3.fillText('Reaction', boxA_X - 70, boxA_Y + boxSize/2 - 15);
        
        // Force on B (action)
        ctx3.strokeStyle = '#10b981';
        ctx3.lineWidth = 3;
        ctx3.beginPath();
        ctx3.moveTo(boxB_X + boxSize, boxB_Y + boxSize/2);
        ctx3.lineTo(boxB_X + boxSize + 50, boxB_Y + boxSize/2);
        ctx3.stroke();
        
        ctx3.fillStyle = '#10b981';
        ctx3.beginPath();
        ctx3.moveTo(boxB_X + boxSize + 50, boxB_Y + boxSize/2);
        ctx3.lineTo(boxB_X + boxSize + 40, boxB_Y + boxSize/2 - 6);
        ctx3.lineTo(boxB_X + boxSize + 40, boxB_Y + boxSize/2 + 6);
        ctx3.closePath();
        ctx3.fill();
        
        ctx3.fillStyle = '#1f2937';
        ctx3.font = '14px Arial';
        ctx3.fillText('Action', boxB_X + boxSize + 30, boxB_Y + boxSize/2 - 15);
      }
    }

    function updateActionReactionSimulation(timestamp) {
      if (!actionReactionSimulation.running) return;
      
      if (!actionReactionSimulation.lastTime) actionReactionSimulation.lastTime = timestamp;
      const deltaTime = (timestamp - actionReactionSimulation.lastTime) / 1000;
      actionReactionSimulation.lastTime = timestamp;
      
      // Calculate forces (action-reaction pair)
      actionReactionSimulation.forceB = actionReactionSimulation.force;
      actionReactionSimulation.forceA = -actionReactionSimulation.force; // Equal and opposite
      
      // Calculate accelerations
      actionReactionSimulation.accelerationA = actionReactionSimulation.forceA / actionReactionSimulation.massA;
      actionReactionSimulation.accelerationB = actionReactionSimulation.forceB / actionReactionSimulation.massB;
      
      // Update velocities
      actionReactionSimulation.velocityA += actionReactionSimulation.accelerationA * deltaTime;
      actionReactionSimulation.velocityB += actionReactionSimulation.accelerationB * deltaTime;
      
      // Update positions
      actionReactionSimulation.positionA += actionReactionSimulation.velocityA * deltaTime;
      actionReactionSimulation.positionB += actionReactionSimulation.velocityB * deltaTime;
      
      // Boundary checks
      let hitBoundary = false;
      const minX = 0.5;
      const maxX = canvas3.width / PIXELS_PER_METER - 1.5;
      
      if (actionReactionSimulation.positionA < minX) {
        actionReactionSimulation.positionA = minX;
        actionReactionSimulation.velocityA = 0;
        hitBoundary = true;
      }
      
      if (actionReactionSimulation.positionB > maxX) {
        actionReactionSimulation.positionB = maxX;
        actionReactionSimulation.velocityB = 0;
        hitBoundary = true;
      }
      
      // Prevent objects from overlapping
      const minDistance = 1.2; // meters
      if (actionReactionSimulation.positionB - actionReactionSimulation.positionA < minDistance) {
        actionReactionSimulation.positionA = actionReactionSimulation.positionB - minDistance;
        actionReactionSimulation.velocityA = actionReactionSimulation.velocityB;
        hitBoundary = true;
      }
      
      if (hitBoundary) {
        actionReactionSimulation.running = false;
        actionReactionSimulation.boundaryReached = true;
        showBoundaryIndicator('3');
      }
      
      // Only update time if not at boundary
      if (!actionReactionSimulation.boundaryReached) {
        actionReactionSimulation.time += deltaTime;
      }
      
      // Update metrics
      document.getElementById('forceA').textContent = actionReactionSimulation.forceA.toFixed(2) + ' N';
      document.getElementById('forceB').textContent = actionReactionSimulation.forceB.toFixed(2) + ' N';
      document.getElementById('accelerationA').textContent = actionReactionSimulation.accelerationA.toFixed(2) + ' m/s²';
      document.getElementById('accelerationB').textContent = actionReactionSimulation.accelerationB.toFixed(2) + ' m/s²';
      
      // Render
      renderActionReaction();
      
      if (actionReactionSimulation.running) {
        actionReactionSimulation.animationId = requestAnimationFrame(updateActionReactionSimulation);
      }
    }

    // Set up Law 3 controls
    document.getElementById('mass1-value').addEventListener('input', function() {
      actionReactionSimulation.massA = parseFloat(this.value);
      document.getElementById('mass1-value-val').textContent = this.value + ' kg';
    });
    
    document.getElementById('mass2-value').addEventListener('input', function() {
      actionReactionSimulation.massB = parseFloat(this.value);
      document.getElementById('mass2-value-val').textContent = this.value + ' kg';
    });
    
    document.getElementById('force-magnitude').addEventListener('input', function() {
      actionReactionSimulation.force = parseFloat(this.value);
      document.getElementById('force-magnitude-val').textContent = this.value + ' N';
    });
    
    document.getElementById('start3').addEventListener('click', function() {
      if (!actionReactionSimulation.running) {
        actionReactionSimulation.running = true;
        actionReactionSimulation.lastTime = 0;
        actionReactionSimulation.boundaryReached = false;
        requestAnimationFrame(updateActionReactionSimulation);
        showNotification("Action-Reaction simulation started! Note the forces are equal but opposite.");
      }
    });
    
    document.getElementById('pause3').addEventListener('click', function() {
      actionReactionSimulation.running = false;
      if (actionReactionSimulation.animationId) {
        cancelAnimationFrame(actionReactionSimulation.animationId);
      }
      showNotification("Simulation paused");
    });
    
    document.getElementById('reset3').addEventListener('click', function() {
      actionReactionSimulation.running = false;
      actionReactionSimulation.boundaryReached = false;
      if (actionReactionSimulation.animationId) {
        cancelAnimationFrame(actionReactionSimulation.animationId);
      }
      actionReactionSimulation.positionA = 3;
      actionReactionSimulation.positionB = 6;
      actionReactionSimulation.velocityA = 0;
      actionReactionSimulation.velocityB = 0;
      actionReactionSimulation.accelerationA = 0;
      actionReactionSimulation.accelerationB = 0;
      actionReactionSimulation.forceA = 0;
      actionReactionSimulation.forceB = 0;
      actionReactionSimulation.time = 0;
      
      document.getElementById('forceA').textContent = '0.00 N';
      document.getElementById('forceB').textContent = '0.00 N';
      document.getElementById('accelerationA').textContent = '0.00 m/s²';
      document.getElementById('accelerationB').textContent = '0.00 m/s²';
      
      renderActionReaction();
      showNotification("Simulation reset");
    });

    // Initial render
    renderActionReaction();
  </script>
</body>
</html>
