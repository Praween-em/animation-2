<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Interactive Physics — Newton's Laws</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    /* Responsive styling and consistent look for all three concepts */
    :root {
      --ink: #131522;
      --muted: #6b7280;
      --panel: #ffffff;
      --line: #e5e7eb;
      --bg: #f6f7fb;
      --accent: #2563eb;
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: system-ui, Arial, sans-serif;
      margin: 0;
      background: var(--bg);
      color: var(--ink);
      line-height: 1.5;
    }

    header {
      background: #1f2937;
      color: #fff;
      padding: 14px 18px;
    }

    h1 {
      margin: 0;
      font-size: 20px;
    }

    .wrap {
      max-width: 980px;
      margin: 16px auto;
      padding: 0 12px;
    }

    .panel {
      background: var(--panel);
      border: 1px solid var(--line);
      border-radius: 12px;
      padding: 14px;
      margin: 12px 0;
    }

    .row {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .cell {
      flex: 1;
      min-width: 260px;
    }

    canvas {
      display: block;
      width: 100%;
      max-width: 956px;
      height: 320px;
      background: #cce6ff;
      border: 2px solid #1f2937;
      border-radius: 10px;
      margin: 12px 0;
    }

    label {
      display: inline-block;
      min-width: 170px;
    }

    input[type=range] {
      width: 240px;
    }

    input[type=number] {
      width: 110px;
      padding: 6px;
      border: 1px solid var(--line);
      border-radius: 8px;
    }

    button {
      padding: 8px 12px;
      margin: 3px 3px;
      cursor: pointer;
      border: 1px solid #cfcfcf;
      border-radius: 8px;
      background: #f3f4f6;
    }

    button.primary {
      background: var(--accent);
      color: #fff;
      border-color: #1d4ed8;
    }

    .metric {
      background: #f3f4f6;
      border: 1px solid #e5e7eb;
      border-radius: 10px;
      padding: 8px;
      margin-top: 8px;
      font-variant-numeric: tabular-nums;
    }

    code {
      background: #eef2ff;
      padding: 0 4px;
      border-radius: 4px;
    }

    ul {
      padding-left: 20px;
      margin: 6px 0;
    }

    .note {
      color: var(--muted);
      font-size: 13px;
    }

    /* Additional styling for layout on smaller screens */
    @media (max-width: 600px) {
      .row {
        flex-direction: column;
      }

      input[type=range] {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Interactive Physics — Newton's Laws</h1>
  </header>
  <div class="wrap">

    <!-- Concept 1: Force -->
    <div class="panel">
      <h2>Concept 1 — Force</h2>
      <p><b>Force</b> is an external <b>push</b> or <b>pull</b> on an object that can change its state of motion or shape. It is a <b>vector</b> (has magnitude and direction) and is measured in newtons (N).</p>
      <ul>
        <li><b>Net Force (ΣF)</b>: The vector sum of all forces on the object. Motion responds to the net force.</li>
        <li><b>Newton’s Second Law</b>: <code>ΣF = m a</code> ⇒ <code>a = ΣF / m</code>.</li>
        <li><b>Friction</b>: Opposes relative motion between surfaces. Static friction prevents start of motion up to <code>F<sub>s,max</sub> = μ<sub>s</sub>N</code>; kinetic friction during motion is <code>F<sub>k</sub> = μ<sub>k</sub>N</code>, with <code>N = m g</code>.</li>
      </ul>
      <p><b>Real-life examples:</b> pushing a box on the floor, pulling a suitcase with wheels, a car accelerating (engine force forward, drag and friction opposing).</p>
      <p class="note">We assume motion on a horizontal surface. Gravity acts vertically; only its effect through the normal reaction <code>N = m g</code> enters friction.</p>
    </div>
    <canvas id="forceCanvas" width="956" height="320" aria-label="Force simulation"></canvas>
    <div class="panel">
      <div class="row">
        <div class="cell">
          <h3>Controls</h3>
          <div>
            <label>Mass (kg)</label>
            <input type="range" id="mass" min="1" max="50" step="1" value="10">
            <span id="massVal">10</span> kg
          </div>
          <div>
            <label>Applied Force (N)</label>
            <input type="range" id="fapp" min="-200" max="200" step="1" value="60">
            <span id="fappVal">60</span> N
          </div>
          <div>
            <label>Static friction μ<sub>s</sub></label>
            <input type="range" id="mus" min="0" max="1" step="0.01" value="0.40">
            <span id="musVal">0.40</span>
          </div>
          <div>
            <label>Kinetic friction μ<sub>k</sub></label>
            <input type="range" id="muk" min="0" max="1" step="0.01" value="0.30">
            <span id="mukVal">0.30</span>
          </div>
          <div>
            <label>Gravity g (m/s²)</label>
            <input type="range" id="grav" min="1" max="20" step="0.1" value="9.8">
            <span id="gravVal">9.8</span>
          </div>
          <div style="margin-top:6px">
            <button id="start1" class="primary">Start</button>
            <button id="pause1">Pause</button>
            <button id="reset1">Reset</button>
          </div>
          <p class="note">Tip: Increase μ<sub>s</sub> to see the box resist motion until |F<sub>app</sub>| &gt; μ<sub>s</sub>N.</p>
        </div>
        <div class="cell">
          <h3>Live Metrics</h3>
          <div class="metric" id="netF">ΣF = 0.00 N</div>
          <div class="metric" id="acc">a = 0.00 m/s²</div>
          <div class="metric" id="vel">v = 0.00 m/s</div>
          <div class="metric" id="pos">x = 0.00 m</div>
          <div class="metric" id="fric">Friction = 0.00 N (mode: static)</div>
          <div class="metric" id="status">Status: ready</div>
        </div>
      </div>
    </div>

    <!-- Concept 2: Newton's First Law -->
    <div class="panel">
      <h2>Concept 2 — Newton's First Law (Law of Inertia)</h2>
      <p><b>Definition:</b> An object continues in its state of rest or uniform motion in a straight line unless acted upon by an external net force.</p>
      <ul>
        <li>Explains the natural tendency of objects to resist changes in motion — called <b>inertia</b>.</li>
        <li>No net force (<code>ΣF = 0</code>) ⇒ acceleration <code>a = 0</code>.</li>
        <li>Inertia is proportional to mass — heavier objects are harder to start or stop moving.</li>
      </ul>
      <p><b>Real-life examples:</b></p>
      <ul>
        <li>Passengers lurch forward when a bus stops suddenly (body keeps moving).</li>
        <li>A ball on a smooth surface rolls for a long time (low friction).</li>
        <li>A coin stays on a card when you quickly flick the card away.</li>
      </ul>
      <p class="note">We simulate horizontal motion with optional friction to compare ideal vs real cases.</p>
    </div>
    <canvas id="law1Canvas" width="956" height="320" aria-label="Newton's First Law simulation"></canvas>
    <div class="panel">
      <div class="row">
        <div class="cell">
          <h3>Controls</h3>
          <div>
            <label>Initial Velocity (m/s)</label>
            <input type="range" id="initVel" min="-10" max="10" step="0.1" value="5">
            <span id="initVelVal">5</span>
          </div>
          <div>
            <label>Friction coefficient μ<sub>k</sub></label>
            <input type="range" id="muK2" min="0" max="1" step="0.01" value="0">
            <span id="muK2Val">0.00</span>
          </div>
          <div>
            <label>Mass (kg)</label>
            <input type="range" id="mass2" min="1" max="50" step="1" value="10">
            <span id="mass2Val">10</span>
          </div>
          <div style="margin-top:6px">
            <button id="start2" class="primary">Start</button>
            <button id="pause2">Pause</button>
            <button id="reset2">Reset</button>
          </div>
        </div>
        <div class="cell">
          <h3>Live Metrics</h3>
          <div class="metric" id="vel2">v = 0.00 m/s</div>
          <div class="metric" id="pos2">x = 0.00 m</div>
          <div class="metric" id="fric2">Friction = 0.00 N</div>
          <div class="metric" id="status2">Status: ready</div>
        </div>
      </div>
    </div>

    <!-- Concept 3: Newton's Second Law -->
    <div class="panel">
      <h2>Concept 3 — Newton's Second Law of Motion</h2>
      <p><b>Definition:</b> The acceleration of an object is directly proportional to the net force acting on it and inversely proportional to its mass.</p>
      <p><b>Formula:</b> <code>ΣF = m · a</code></p>
      <ul>
        <li><code>ΣF</code> — net force acting on the object (N)</li>
        <li><code>m</code> — mass of the object (kg)</li>
        <li><code>a</code> — acceleration of the object (m/s²)</li>
      </ul>
      <p><b>Key Points:</b></p>
      <ul>
        <li>Increasing the applied force increases acceleration (if mass stays the same).</li>
        <li>Increasing mass decreases acceleration (if force stays the same).</li>
        <li>The direction of acceleration is the same as the net force.</li>
      </ul>
      <p><b>Real-life examples:</b></p>
      <ul>
        <li>Pushing an empty shopping cart vs a full cart — the empty one accelerates faster.</li>
        <li>A football kicked harder moves faster.</li>
        <li>Rockets accelerate more with higher thrust (force).</li>
      </ul>
    </div>
    <canvas id="law2Canvas" width="956" height="320" aria-label="Newton's Second Law simulation"></canvas>
    <div class="panel">
      <div class="row">
        <div class="cell">
          <h3>Controls</h3>
          <div>
            <label>Applied Force (N)</label>
            <input type="range" id="force3" min="-50" max="50" step="0.5" value="20">
            <span id="force3Val">20.0</span>
          </div>
          <div>
            <label>Mass (kg)</label>
            <input type="range" id="mass3" min="1" max="50" step="1" value="10">
            <span id="mass3Val">10</span>
          </div>
          <div>
            <label>Friction coefficient μ<sub>k</sub></label>
            <input type="range" id="muK3" min="0" max="1" step="0.01" value="0.1">
            <span id="muK3Val">0.10</span>
          </div>
          <div>
            <label>Gravity (m/s²)</label>
            <input type="range" id="g3" min="0" max="20" step="0.1" value="9.8">
            <span id="g3Val">9.8</span>
          </div>
          <div style="margin-top:6px">
            <button id="start3" class="primary">Start</button>
            <button id="pause3">Pause</button>
            <button id="reset3">Reset</button>
          </div>
        </div>
        <div class="cell">
          <h3>Live Metrics</h3>
          <div class="metric" id="netF3">Net Force = 0.00 N</div>
          <div class="metric" id="acc3">a = 0.000 m/s²</div>
          <div class="metric" id="vel3">v = 0.000 m/s</div>
          <div class="metric" id="pos3">x = 0.000 m</div>
          <div class="metric" id="fric3">Friction = 0.000 N</div>
          <div class="metric" id="status3">Status: ready</div>
        </div>
      </div>
    </div>

  </div>

  <script>
    // General Utility Functions
    const pxPerM = 60; // rendering scale: 1 m = 60 px
    function drawArrow(ctx, x1, y1, x2, y2, color) {
      ctx.strokeStyle = color || '#111827';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(x1, y1);
      ctx.lineTo(x2, y2);
      ctx.stroke();
      const ang = Math.atan2(y2 - y1, x2 - x1);
      const head = 10;
      ctx.beginPath();
      ctx.moveTo(x2, y2);
      ctx.lineTo(x2 - head * Math.cos(ang - Math.PI / 6), y2 - head * Math.sin(ang - Math.PI / 6));
      ctx.lineTo(x2 - head * Math.cos(ang + Math.PI / 6), y2 - head * Math.sin(ang + Math.PI / 6));
      ctx.closePath();
      ctx.fillStyle = color || '#111827';
      ctx.fill();
    }

    // ===================================
    // Concept 1: Force Simulation Logic
    // ===================================
    const canvas1 = document.getElementById('forceCanvas');
    const ctx1 = canvas1.getContext('2d');

    const massIn1 = document.getElementById('mass');
    const fappIn1 = document.getElementById('fapp');
    const musIn1 = document.getElementById('mus');
    const mukIn1 = document.getElementById('muk');
    const gIn1 = document.getElementById('grav');
    const massVal1 = document.getElementById('massVal');
    const fappVal1 = document.getElementById('fappVal');
    const musVal1 = document.getElementById('musVal');
    const mukVal1 = document.getElementById('mukVal');
    const gVal1 = document.getElementById('gravVal');
    const netFEl1 = document.getElementById('netF');
    const accEl1 = document.getElementById('acc');
    const velEl1 = document.getElementById('vel');
    const posEl1 = document.getElementById('pos');
    const fricEl1 = document.getElementById('fric');
    const statusEl1 = document.getElementById('status');
    const startBtn1 = document.getElementById('start1');
    const pauseBtn1 = document.getElementById('pause1');
    const resetBtn1 = document.getElementById('reset1');

    let m1 = parseFloat(massIn1.value);
    let g1 = parseFloat(gIn1.value);
    let muS1 = parseFloat(musIn1.value);
    let muK1 = parseFloat(mukIn1.value);
    let Fapp1 = parseFloat(fappIn1.value);
    let x1 = 1.0;
    let v1 = 0.0;
    let a1 = 0.0;
    let running1 = false;
    let lastT1 = null;

    function syncLabels1() {
      massVal1.textContent = m1.toFixed(0);
      fappVal1.textContent = Fapp1.toFixed(0);
      musVal1.textContent = muS1.toFixed(2);
      mukVal1.textContent = muK1.toFixed(2);
      gVal1.textContent = g1.toFixed(1);
    }
    syncLabels1();

    massIn1.oninput = () => { m1 = parseFloat(massIn1.value); syncLabels1(); };
    fappIn1.oninput = () => { Fapp1 = parseFloat(fappIn1.value); syncLabels1(); };
    musIn1.oninput = () => {
      muS1 = parseFloat(musIn1.value);
      if (muK1 > muS1) {
        muK1 = muS1;
        mukIn1.value = muK1;
      }
      syncLabels1();
    };
    mukIn1.oninput = () => {
      muK1 = Math.min(parseFloat(mukIn1.value), muS1);
      mukIn1.value = muK1;
      syncLabels1();
    };
    gIn1.oninput = () => { g1 = parseFloat(gIn1.value); syncLabels1(); };

    startBtn1.onclick = () => { running1 = true; statusEl1.textContent = "Status: running"; lastT1 = null; };
    pauseBtn1.onclick = () => { running1 = false; statusEl1.textContent = "Status: paused"; };
    resetBtn1.onclick = () => {
      running1 = false;
      lastT1 = null;
      x1 = 1.0;
      v1 = 0.0;
      a1 = 0.0;
      statusEl1.textContent = "Status: reset";
      render1();
      updateMetrics1(0, 0, 0, "static");
    };

    function computeFriction1(v, Fapp, m, g) {
      const N = m * g;
      const FsMax = muS1 * N;
      const FkMag = muK1 * N;
      if (Math.abs(v) < 1e-4) {
        if (Math.abs(Fapp) <= FsMax) {
          return {
            F: -Fapp,
            mode: "static"
          };
        }
        const dir = Math.sign(Fapp);
        return {
          F: -dir * FkMag,
          mode: "kinetic"
        };
      }
      const dir = Math.sign(v);
      return {
        F: -dir * FkMag,
        mode: "kinetic"
      };
    }

    function step1(ts) {
      if (!lastT1) lastT1 = ts;
      const dt = Math.min(0.05, (ts - lastT1) / 1000);
      lastT1 = ts;
      if (running1) {
        const fr = computeFriction1(v1, Fapp1, m1, g1);
        const Fnet = Fapp1 + fr.F;
        a1 = Fnet / m1;
        v1 += a1 * dt;
        if (Math.abs(v1) < 1e-6 && Math.abs(Fapp1) < muS1 * m1 * g1) v1 = 0;
        x1 += v1 * dt;
        const xMin = 0.5,
          xMax = (canvas1.width / pxPerM) - 0.5;
        if (x1 < xMin) {
          x1 = xMin;
          v1 = 0;
        }
        if (x1 > xMax) {
          x1 = xMax;
          v1 = 0;
        }
        render1();
        updateMetrics1(Fnet, a1, v1, fr.mode, fr.F);
      }
      requestAnimationFrame(step1);
    }

    function updateMetrics1(Fnet, a, v, mode, Ffric) {
      netFEl1.textContent = `ΣF = ${Fnet.toFixed(2)} N`;
      accEl1.textContent = `a = ${a.toFixed(3)} m/s²`;
      velEl1.textContent = `v = ${v.toFixed(3)} m/s`;
      posEl1.textContent = `x = ${x1.toFixed(3)} m`;
      const frStr = (typeof Ffric === "number") ? `${Ffric.toFixed(2)} N` : "0.00 N";
      fricEl1.textContent = `Friction = ${frStr} (mode: ${mode})`;
    }

    function render1() {
      const W = canvas1.width,
        H = canvas1.height;
      ctx1.clearRect(0, 0, W, H);
      ctx1.strokeStyle = '#1f2937';
      ctx1.lineWidth = 2;
      ctx1.beginPath();
      ctx1.moveTo(20, 260);
      ctx1.lineTo(W - 20, 260);
      ctx1.stroke();
      const bx = x1 * pxPerM;
      const by = 220;
      const bw = 60,
        bh = 40;
      ctx1.fillStyle = '#f59e0b';
      ctx1.strokeStyle = '#111827';
      ctx1.lineWidth = 2;
      ctx1.fillRect(bx - bw / 2, by - bh, bw, bh);
      ctx1.strokeRect(bx - bw / 2, by - bh, bw, bh);
      const Fx = Fapp1;
      if (Math.abs(Fx) > 1e-6) {
        drawArrow(ctx1, bx, by - bh - 20, bx + Math.max(Math.min(Fx, 200), -200) * 0.8, by - bh - 20, '#2563eb');
      }
      ctx1.fillStyle = '#111827';
      ctx1.font = '12px system-ui';
      ctx1.fillText('Scale: 1 m = 60 px', 20, 290);
    }
    render1();
    updateMetrics1(0, 0, 0, "static", 0);
    requestAnimationFrame(step1);

    // ===================================
    // Concept 2: Newton's First Law Logic
    // ===================================
    const canvas2 = document.getElementById('law1Canvas');
    const ctx2 = canvas2.getContext('2d');
    const pxPerM2 = 60;

    let v2 = parseFloat(document.getElementById('initVel').value);
    let muK2 = parseFloat(document.getElementById('muK2').value);
    let m2 = parseFloat(document.getElementById('mass2').value);
    let g2 = 9.8;
    let x2 = 1.0;
    let running2 = false;
    let lastT2 = null;

    const vel2El = document.getElementById('vel2');
    const pos2El = document.getElementById('pos2');
    const fric2El = document.getElementById('fric2');
    const status2El = document.getElementById('status2');

    document.getElementById('initVel').oninput = e => {
      v2 = parseFloat(e.target.value);
      document.getElementById('initVelVal').textContent = v2.toFixed(1);
    };
    document.getElementById('muK2').oninput = e => {
      muK2 = parseFloat(e.target.value);
      document.getElementById('muK2Val').textContent = muK2.toFixed(2);
    };
    document.getElementById('mass2').oninput = e => {
      m2 = parseFloat(e.target.value);
      document.getElementById('mass2Val').textContent = m2.toFixed(0);
    };

    document.getElementById('start2').onclick = () => {
      running2 = true;
      status2El.textContent = "Status: running";
      lastT2 = null;
    };
    document.getElementById('pause2').onclick = () => {
      running2 = false;
      status2El.textContent = "Status: paused";
    };
    document.getElementById('reset2').onclick = () => {
      running2 = false;
      lastT2 = null;
      x2 = 1.0;
      v2 = parseFloat(document.getElementById('initVel').value);
      status2El.textContent = "Status: reset";
      render2();
      updateMetrics2();
    };

    function step2(ts) {
      if (!lastT2) lastT2 = ts;
      const dt = Math.min(0.05, (ts - lastT2) / 1000);
      lastT2 = ts;
      if (running2) {
        const Ffric = muK2 * m2 * g2 * (v2 !== 0 ? -Math.sign(v2) : 0);
        const a2 = Ffric / m2;
        v2 += a2 * dt;
        if (Math.abs(v2) < 1e-5) v2 = 0;
        x2 += v2 * dt;
        render2(Ffric);
        updateMetrics2(Ffric);
      }
      requestAnimationFrame(step2);
    }

    function updateMetrics2(Ffric = 0) {
      vel2El.textContent = `v = ${v2.toFixed(3)} m/s`;
      pos2El.textContent = `x = ${x2.toFixed(3)} m`;
      fric2El.textContent = `Friction = ${Ffric.toFixed(2)} N`;
    }

    function render2(Ffric = 0) {
      const W = canvas2.width,
        H = canvas2.height;
      ctx2.clearRect(0, 0, W, H);
      ctx2.strokeStyle = '#1f2937';
      ctx2.beginPath();
      ctx2.moveTo(20, 260);
      ctx2.lineTo(W - 20, 260);
      ctx2.stroke();
      const bx = x2 * pxPerM2;
      const by = 220;
      ctx2.fillStyle = '#f59e0b';
      ctx2.strokeStyle = '#111827';
      ctx2.fillRect(bx - 30, by - 40, 60, 40);
      ctx2.strokeRect(bx - 30, by - 40, 60, 40);
      if (Math.abs(Ffric) > 1e-6) {
        drawArrow(ctx2, bx, by - 40 - 20, bx - Math.sign(Ffric) * 40, by - 40 - 20, '#ef4444');
      }
    }
    render2();
    updateMetrics2();
    requestAnimationFrame(step2);

    // ===================================
    // Concept 3: Newton's Second Law Logic
    // ===================================
    const canvas3 = document.getElementById('law2Canvas');
    const ctx3 = canvas3.getContext('2d');
    const pxPerM3 = 60;

    let Fapp3 = parseFloat(document.getElementById('force3').value);
    let m3 = parseFloat(document.getElementById('mass3').value);
    let muK3 = parseFloat(document.getElementById('muK3').value);
    let g3 = parseFloat(document.getElementById('g3').value);
    let v3 = 0.0,
      x3 = 1.0;
    let running3 = false;
    let lastT3 = null;

    const netF3El = document.getElementById('netF3');
    const acc3El = document.getElementById('acc3');
    const vel3El = document.getElementById('vel3');
    const pos3El = document.getElementById('pos3');
    const fric3El = document.getElementById('fric3');
    const status3El = document.getElementById('status3');

    document.getElementById('force3').oninput = e => {
      Fapp3 = parseFloat(e.target.value);
      document.getElementById('force3Val').textContent = Fapp3.toFixed(1);
    };
    document.getElementById('mass3').oninput = e => {
      m3 = parseFloat(e.target.value);
      document.getElementById('mass3Val').textContent = m3.toFixed(0);
    };
    document.getElementById('muK3').oninput = e => {
      muK3 = parseFloat(e.target.value);
      document.getElementById('muK3Val').textContent = muK3.toFixed(2);
    };
    document.getElementById('g3').oninput = e => {
      g3 = parseFloat(e.target.value);
      document.getElementById('g3Val').textContent = g3.toFixed(1);
    };

    document.getElementById('start3').onclick = () => {
      running3 = true;
      status3El.textContent = "Status: running";
      lastT3 = null;
    };
    document.getElementById('pause3').onclick = () => {
      running3 = false;
      status3El.textContent = "Status: paused";
    };
    document.getElementById('reset3').onclick = () => {
      running3 = false;
      lastT3 = null;
      v3 = 0.0;
      x3 = 1.0;
      status3El.textContent = "Status: reset";
      render3();
      updateMetrics3();
    };

    function step3(ts) {
      if (!lastT3) lastT3 = ts;
      const dt = Math.min(0.05, (ts - lastT3) / 1000);
      lastT3 = ts;
      if (running3) {
        const Ffric = muK3 * m3 * g3 * (v3 !== 0 ? -Math.sign(v3) : 0);
        const Fnet = Fapp3 + Ffric;
        const a3 = Fnet / m3;
        v3 += a3 * dt;
        x3 += v3 * dt;
        render3(Ffric);
        updateMetrics3(Fnet, a3, Ffric);
      }
      requestAnimationFrame(step3);
    }

    function updateMetrics3(Fnet = 0, a3 = 0, Ffric = 0) {
      netF3El.textContent = `Net Force = ${Fnet.toFixed(3)} N`;
      acc3El.textContent = `a = ${a3.toFixed(3)} m/s²`;
      vel3El.textContent = `v = ${v3.toFixed(3)} m/s`;
      pos3El.textContent = `x = ${x3.toFixed(3)} m`;
      fric3El.textContent = `Friction = ${Ffric.toFixed(3)} N`;
    }

    function render3(Ffric = 0) {
      const W = canvas3.width,
        H = canvas3.height;
      ctx3.clearRect(0, 0, W, H);
      ctx3.strokeStyle = '#1f2937';
      ctx3.beginPath();
      ctx3.moveTo(20, 260);
      ctx3.lineTo(W - 20, 260);
      ctx3.stroke();
      const bx = x3 * pxPerM3;
      const by = 220;
      ctx3.fillStyle = '#3b82f6';
      ctx3.strokeStyle = '#111827';
      ctx3.fillRect(bx - 30, by - 40, 60, 40);
      ctx3.strokeRect(bx - 30, by - 40, 60, 40);
      if (Math.abs(Fapp3) > 1e-6) {
        drawArrow(ctx3, bx, by - 40 - 20, bx + Math.max(Math.min(Fapp3, 200), -200) * 0.8, by - 40 - 20, '#2563eb');
      }
      if (Math.abs(Ffric) > 1e-6) {
        drawArrow(ctx3, bx, by - 40 + 20, bx - Math.sign(Ffric) * 40, by - 40 + 20, '#ef4444');
      }
    }
    render3();
    updateMetrics3();
    requestAnimationFrame(step3);
  </script>
</body>
</html>
